<!DOCTYPE html>
<html>
  <head>
    <title>Colorado International Business Activity</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="style.css">
    <link
      href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playwrite+HR:wght@100..400&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="header" class="header">
      <h1>
        <span class="header-text">Foreign Businesses</span><br />
        <span class="header-text colorado">Colorado</span>
        <div id="button-container" class="button-container"></div>
          <button id="countries-button">Top 10 Countries</button>
          <button id="area-button">Countries by Area</button>
          <button id="time-button">Countries vs. Time</button>
      </h1>
    </div>

    <div id="chart-container" class="chart-container">
      <svg id="chart" class="chart" viewBox="0 0 1000 2000"></svg>
    </div>

    <script type="module">
     import {drawBarGraph} from './drawBarGraph.js';
     import {drawLineGraph} from './drawLineGraph.js';
     import {drawGeoMap} from './drawGeoMap.js';

      const CSV_LOCATION =
        'https://gist.githubusercontent.com/fullstacc/853f0091dc60b7e4ab26a8eb15735862/raw/16a88dc7728a26d9d8f6fa0a2a9a03216ec41c10/colorado_international_counts.csv'

      async function init() {
        var data = await d3.csv(CSV_LOCATION, function (d) {
          return {
            name: d.name, // Country name
            count: +d.count, // Convert count to number
          }
        })
        console.log(data)

        data = data
          .sort(function (a, b) {
            return b.count - a.count
          })
          .slice(0, 10)

       

        // barchart
        // sauce: https://d3-graph-gallery.com/graph/barplot_horizontal.html

        const width = 500;
        const height = 500;
        const marginTop = 20;
        const marginRight = 20;
        const marginBottom = 100;
        const marginLeft = 300;


    

  // Setup the event listener for the 'countries-button'
  d3.select('#countries-button').on('click', function() {
    clearCanvas(); // Clear the canvas
    drawBarGraph(width,height,marginLeft
          ,marginRight,marginTop,marginBottom,data); // Redraw the graph
  });


      // Function to clear the SVG content
      function clearCanvas() {
          d3.select('#chart').selectAll('*').remove() // Remove all child elements of the SVG
        }

        var buttonContainer = d3.select('#button-container')

        // Assuming buttonContainer is a D3 selection
        buttonContainer.selectAll('button')
          .on('click', clearCanvas); // Attach the click event listener to all buttons

      // make buttons for navigation
      var buttonContainer = d3.select('#button-container')
      document.getElementById('time-button').addEventListener('click', function() {
  clearCanvas();
  drawBarGraph();
});
      document.getelementById('countries-button').addEventListener('click', function() {
  clearCanvas();
  drawBarGraph();
});
      document.getElementById('area-button').addEventListener('click', function() {
  clearCanvas();
  drawBarGraph();
      });


document.addEventListener('DOMContentLoaded', function() {
    drawBarGraph(); // This will ensure the bar graph is drawn when the page loads
  });
      } // end init

      

      init()
    </script>
    
  </body>
</html>
